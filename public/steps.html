
<!DOCTYPE html>
<html>
<head>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107877274-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107877274-1');
</script>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
<title>attirsit - shop looks that suit you</title>
<link rel="manifest" href="/manifest.json">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#ffffff">
<style type="text/css">
@import url('https://fonts.googleapis.com/icon?family=Material+Icons');
@import url('https://fonts.googleapis.com/css?family=Open+Sans:300');
*{
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html{
    background-color: #ffffff;
    font-family: 'f', sans-serif;
}
.slider {
  width: 80%;
  margin: 10px auto;
}

.slick-slide {
  margin: 0px;
}

.body {
  width: 100%;
  height: 100%;
  background-image: url(img/pdbg.jpg);
  background-size: contain;
  background-position-y: 0px;
}

.bag {
  position: relative;
  float: right;
  margin-top: 8px;
  right: 20px;
}
.logoFont {
    font-family: f;
    font-size: 32px;
    position: absolute;
    margin-top: 3px;
    left: 19px;
    color: #8e8c92;
}

.slick-prev:before,
.slick-next:before {
    color: black;
}
.content {
  position: relative;
  margin: 0 auto;
  margin-top: 38px;
  width: 80%;
  text-align: center;
  font-size: 18px;
  overflow-y: auto;
}
.contentShop {
  position: relative;
  margin: 0 auto;
  margin-top: 33px;
  width: 80%;
  text-align: center;
  font-size: 18px;
  overflow-y: auto;
}
.content.buy {
  position: relative;
  left: 0;
  right: 0;
  margin: 0 auto;
  top: -47px;
  height: 390px;
  width: 100%;
}
@font-face{
  font-family:'f';
  src: url('fonts/f.ttf');
}
@font-face{
  font-family:'a';
  src: url('fonts/a.otf');
}
.button-container {
    margin: 0 auto;
    position: fixed;
    width: 297px;
    bottom: 0px;
    height: 100px;
    padding-top: 36px;
    z-index: 1;
}
.dot-line {
    color: #8e8c92;
    text-align: center;
    height: 1px;
    margin: 1.00em 0;
}
.dot-line span {
    font-size: 20px;
    line-height: 1px;
    position: absolute;
    text-align: center;
    margin-left: -11px;
}
.line-left {
    background-color: #c3c3c3;
    width: 45%;
    height: 1px;
    float: left;
}
.line-right {
    background-color: #c3c3c3;
    width: 45%;
    height: 1px;
    float: right;
}
.skin-tone {
  background:#666;width:50px;height:50px;display: inline-block;vertical-align: middle;margin-left: 8px;padding-top: 9px;
}
.shoulders {
  background:#f0f0f0;
  width: 90px;
  height:50px;display: inline-block;vertical-align: middle;margin-left: 8px;padding-top: 8px;border-bottom: 4px solid #fff;
}
.htwt {
  border: 1px solid #666;
  height: 43px;
  font-size: 18px;
  width: 70px;
}
.silhoutte {
  position: relative;
  top: 29px;
  z-index: 0;
  width: 170px;
  left: 0;
  right: 0;
  margin: 0 auto;
}
.look-heading {
  position:relative;
  z-index:1;
  padding:30px;
  color:#fff;
  text-align:left;
}
.look-sub-heading {
  position:relative;
  z-index:1;
  padding:30px;
  color:Â #fff;
  text-align:left;
  font-size:16px;
}
.look-1 {
  background-color: #745972;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.hightop {
  top: 26px;
}
.selfie-tbl {
  display: inline-table;
  margin-top: 20px;
  margin-left: -16px;
}
.selfie-img-cell {
  display: table-cell;vertical-align: middle;padding: 24px;
}
.selfie-img-cell img {
  width: 70px;margin-top: 40px;
}
.fit-profile-heading {
  margin-top: 60px;
  text-align: center;
  font-family: Open Sans;
  font-size: 18px;
  color:#8e8c92;
}
.upload-btn {
  width: 200px;
  top: 11px;
  left: -10px;
}
.selfie-title {
  margin-top: 10px;
  float: left;
  font-size: 20px;
  font-family: "a";
  color: #4b4b4b;
  letter-spacing: 2px;
}
.selfie-desc {
  width: 220px;
  font-family: Open Sans;
  font-size: 18px;
  float: left;
  margin-top: 6px;
  text-align: left;
  margin-left: 3px;
  color: #8e8c92;
}
.products {
    position: absolute;
    opacity: 1;
    left: 0px;
    top: 70px;
    display: none;
}
.product-bg {
  background-image: url(img/pbg.png);
  width: 100vw;height: 460px;
  background-size: cover;
  position: relative;
  opacity: 1;
}
.product-bg-size {
  width: 100vw;
  height: 555px;
  background-size: cover;
  position: relative;
  left: -28px;
  top: 100px;
  opacity: 1;
}
.clip {
  clip-path: polygon(28% 0, 30% 1%, 31% 1%, 38% 3%, 63% 3%, 75% 0, 98% 0, 100% 100%, 79% 100%, 12% 100%, 0 100%, 2% 0);
  -webkit-clip-path: polygon(28% 0, 30% 1%, 31% 1%, 38% 3%, 63% 3%, 75% 0, 98% 0, 100% 100%, 79% 100%, 12% 100%, 0 100%, 2% 0);
}
.minus90 {
  -webkit-transform: translateX(-100%) rotate(-90deg); /* Safari */
    -moz-transform: translateX(-100%) rotate(-90deg); /* Firefox 3.6 Firefox 4 */
    -ms-transform: translateX(-100%) rotate(-90deg); /* IE9 */
    -o-transform: translateX(-100%) rotate(-90deg); /* Opera */
    transform: translateX(-100%) rotate(-90deg); /* W3C */  
    -webkit-transform-origin: top right;
    -moz-transform-origin: top right;
    -ms-transform-origin: top right;
    -o-transform-origin: top right;
    transform-origin: top right;
    max-width: 107vh;
}
.inputfile {
  display: none;
}
.pngneck-s, .pngneck-m {
  width: 86px;
  margin: 0 auto;
  position: absolute;
  left: 4px;
  right: 0;
  top: 141px;
}
.pngneck-l, .pngneck-xl, .pngneck-xxl {
  width: 90px;
  margin: 0 auto;
  position: absolute;
  left: 4px;
  right: 0;
  top: 141px;
}
.actual-prod {
  width: 200px;
  margin: 0 auto;
  position: absolute;
  left: 0;
  right: 0;
  top: 144px;
}
#footerSlideContainer {
  position: fixed;
  bottom:0;
  width: 100%;
  left: 0;
}
#footerSlideContent {
  width: 100%;
  height: 0px;
  background: rgba(255,255,255,0.9);
  color: #CCCCCC;
  border: none;
}
#footerSlideText {
  padding: 1px 0px 25px 0px;
}
.loading-msg {
  position: absolute;
  top: -38px;
  width: 400px;
  left: -78px;
  margin: 0 auto;
  right: 0;
}
.loading {
  position: absolute;
  background-color: rgba(0,0,0,0);
  border: 7px solid #343339;
  opacity: .9;
  border-top: 7px solid rgba(0,0,0,0);
  border-left: 7px solid rgba(0,0,0,0);
  border-radius: 50px;
  box-shadow: 0 0 35px #343339;
  width: 50px;
  height: 50px;
  -webkit-animation: spin 1.2s infinite linear;
  margin: 0 auto;
  left: 0;
  right: 0;
  top: 10px;
}
#selfieImage {
  display: none;
}
.loading-container {
    display: none;
    width: 70px;
    height: 70px;
    background: #fff;
    position: absolute;
    left: 0;
    right: 0;
    margin: 0 auto;
    top: 42vh;
    border-radius: 12px;
    opacity: 0.8;
}
.merchant-frame {
  display: none;
  font-size: 16px;text-align: center;line-height: 28px;padding-top: 6px;height: 73px;background: #fff;position: static;
  width: 100%;
}
.merchant-size-container {
  position: absolute;
  left: 58px;
  width: 300px;
  top: 20px;
  text-align: left;
}
.rating {
    font-family: "Lucida Console", Monaco, monospace;
    color: lightgray;
    display: inline-block;
    width: 98px;
    height: 12px;
    line-height: 17px;
    position: relative;
}
.rating::before {
    content: "\02605\02605\02605\02605\02605";
}
@-moz-document url-prefix() {
    .rtg::before {
        font-size: 165%;
    }
}
.rating b {
    color: gold;
    display: inline-block;
    height: 17px;
    line-height: 17px;
    position: absolute;
    overflow: hidden;
    left: 4px;
    top: 0;
}
.rating b::before {
    content: "\02605\02605\02605\02605\02605";
}
@-moz-document url-prefix() {
    .rating b::before {
        font-size: 165%;
    }
}
.rating i {
     border: 0;
     clip: rect(0000);
     height: 1px;
     margin: -1px;
     overflow: hidden;
     padding: 0;
     position: absolute;
     width: 1px;
}
@-webkit-keyframes spin {
    0% { -webkit-transform:rotate(0deg); }
    100% { -webkit-transform:rotate(360deg); }
}
@keyframes blinking {
    0% { opacity: 1; }
    20% { opacity: 1; }
    50% { opacity: 0; }
    80% { opacity: 1; }
    100% { opacity: 1; }
}
@-webkit-keyframes blinking {
    0% { opacity: 1; }
    20% { opacity: 1; }
    50% { opacity: 0; }
    80% { opacity: 1; }
    100% { opacity: 1; }
}
.blink {
    animation: blinking 1.2s ease-in-out infinite;
    -webkit-animation: blinking 1.2s ease-in-out infinite;
}
.bad {
  border: 3px solid rgba(255, 79, 79, 0.4) !important;
}
.fit-shoulder-left {
    border: 3px solid rgba(91, 176, 86, 0.4);
    -webkit-border-radius: 30px;
    height: 18px;
    width: 18px;
    position: fixed;
    left: 109px;
    top: 258px;
    -webkit-animation: pulsate 1s ease-out;
    -webkit-animation-iteration-count: infinite;
    opacity: 0.0;
    display: none;
}
.fit-shoulder-right {
    border: 3px solid rgba(91, 176, 86, 0.4);
    -webkit-border-radius: 30px;
    height: 18px;
    width: 18px;
    position: fixed;
    float: right;
    top: 258px;
    -webkit-animation: pulsate 1s ease-out;
    -webkit-animation-iteration-count: infinite;
    opacity: 0.0;
    display: none;
}
.fit-waist-left {
    border: 3px solid rgba(91, 176, 86, 0.4);
    -webkit-border-radius: 30px;
    height: 18px;
    width: 18px;
    position: fixed;
    left: 149px;
    top: 450px;
    -webkit-animation: pulsate 1s ease-out;
    -webkit-animation-iteration-count: infinite;
    opacity: 0.0;
    display: none;
}
.fit-waist-right {
    border: 3px solid rgba(91, 176, 86, 0.4);
    -webkit-border-radius: 30px;
    height: 18px;
    width: 18px;
    position: fixed;
    left: 199px;
    top: 450px;
    -webkit-animation: pulsate 1s ease-out;
    -webkit-animation-iteration-count: infinite;
    opacity: 0.0;
    display: none;
}
.bubbledLeft,.bubbledRight {
    margin-top: 20px;
    padding: 5px 9px;
    max-width: 70%;
    clear: both;
    position: relative;
}

.bubbledLeft{
    float: left;
    margin-right: auto;
    -webkit-border-radius: 8px 8px 8px 0px;
    -moz-border-radius: 8px 8px 8px 0px;
    -o-border-radius: 8px 8px 8px 0px;
    -ms-border-radius: 8px 8px 8px 0px;
    border-radius: 8px 8px 8px 0px;
    background: #646267;
    color: #ffffff;
    font-size: 18px;
    line-height: 18px;
    padding: 12px;
}

.bubbledLeft:before {
    border-bottom: 10px solid #646267;
    border-left: 9px solid rgba(0, 0, 0, 0);
    position: absolute;
    bottom: 0;
    left: -8px;
    content: "";
}

@-webkit-keyframes pulsate {
    0% {-webkit-transform: scale(0.1, 0.1); opacity: 0.0;}
    50% {opacity: 1.0;}
    100% {-webkit-transform: scale(1.5, 1.5); opacity: 0.0;}
}
.close {
  text-align: center;
  display: none;
  position: absolute;
  float: right;
  right: 8px;
  font-weight: bold;
  z-index: 5;
  width: 40px;
  background: rgb(240, 240, 240);
  border-radius: 20px;
  padding: 0px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.2);
  margin: 0 auto;
  color: #898888;
  padding: 10px;
  font-size: 16px;
  top: 74px;
  border: 1px solid #ccc;
}
.close::after {
  content: "X";
  padding-left: 1px;
  top: 0px;
  position: relative;
  font-family: quicksand;
  font-size: 16px;
}
#buy-now {
  position: fixed;
  bottom: 20px;
  margin: 0px auto;
  display: block;
  left: 0;
  right: 0;
}
.strike {
  text-decoration: line-through;
}
.offer-txt {
  margin-top:20px;
  width:100px;
  margin-left:-23px;
  font-size:12px;
}
.size-icon {
  width: 60px;
  background: url(img/size.png);
  background-size: contain;
  height: 60px;
  right: -5px;
  top: 38px;
  float: right;
  position: relative;
  text-align: center;
}
.skintone-fit {
  background: url(img/sticker.png);
  z-index: 0;
  position: relative;
  opacity: 0;
  text-align: center;
  right: 22px;
  top: -225px;
  font-size: 15px;
  padding: 28px 13px 4px;
  color: #515138;
  border-radius: 9px;
  float: right;
  height: 96px;
  background-size: contain;
  background-repeat: no-repeat;
  width: 80px;
}
.skintone-fit-desc {
    position: relative;
    opacity: 0;
    text-align: center;
    top: -229px;
    font-size: 12px;
    padding: 7px 7px 7px 7px;
    width: 125px;
    color: #666;
    border-radius: 9px;
    float: right;
    right: -97px;
}
.shoulder-fit {
  position: relative;
  opacity: 0;
  text-align: center;
  right: -10px;
  top: -140px;
  font-size: 13px;
  padding: 7px 7px 7px 7px;
  background: #3f3f3f;
  width: 110px;
  color: #fff;
  border-radius: 9px;
}
.shoulder-fit-desc {
  position: relative;
  opacity: 0;
  text-align: center;
  right: -6px;
  top: -144px;
  font-size: 12px;
  padding: 7px 7px 7px 7px;
  width: 125px;
  color: #666;
  border-radius: 9px;
}
.size-title {
  display: block;
  position: absolute;
  top: 103px;
  z-index: 0;
  border-bottom: 1px solid #dfa04c;
  color: #4f5063;
  width: 162px;
  text-align: center;
  margin: 0 auto;
  border-radius: 23px;
  padding: 6px;
  font-size: 18px;
  border-left: 1px solid #dfa04c;
  border-right: 1px solid #dfa04c;
  margin: 0 auto;
  left: 0;
  right: 0;
}
.size-hanger {
  width: 84px;
  top: 62px;
  position: absolute;
  margin: 0 auto;
  left: 0;
  right: 0;
}
#tabs {
background: transparent;z-index: 1;
}
.tabs-menu {
    height: 30px;
    float: left;
    clear: both;
    list-style: none;
    margin-left: 26px;
    margin-top: 5px;
    width: 100%;
}

.tabs-menu li {
    height: 30px;
    line-height: 30px;
    float: left;
    margin-right: 10px;
}

.tabs-menu li.current {
    position: relative;
    font-weight: bold;
    z-index: 5;
    background: rgb(241, 241, 241);
    border-radius: 20px;
    padding: 0px 10px;
    border-bottom: 1px solid rgba(255,255,255,0.2);
}

.tabs-menu li a {
    padding: 6px;
    font-size: 20px;
    color: #8e8c92;
    text-decoration: none; 
}

.tabs-menu .current a {
    color: #000;
}

.tab {
    float: left;
    margin-bottom: 20px;
    width: auto;
}

.tab-content {
    padding: 30px 4px 0px 0px;
    display: none;
}

#tab-1 {
 display: block;   
}
.btnMsg {
    display: block;
    height: 50px;
    width: 320px;
    font-family: proxima;
    position: relative;
    overflow: hidden;
    text-decoration: none;
    text-transform: none;
    letter-spacing: 0px;
    color: #4b2f75;
    font-size: 17px;
    padding-top: 14px;
    text-align: center;
    -webkit-border-radius: 34px;
}
.btnMsg:after {
    position: absolute;
    content: '';
    display: inline-block;
    background: rgba(234, 225, 244, 0.35);
    width: 402px;
    z-index: -1;
    -webkit-transform: translateX(-280px);
    transform: translateX(-280px);
    -webkit-transition: -webkit-transform 400ms ease-in;
    transition: -webkit-transform 400ms ease-in;
    transition: transform 400ms ease-in;
    transition: transform 400ms ease-in, -webkit-transform 400ms ease-in;
}
.btn, .btn-nobg {
    display: block;
    bottom: 22px;
    height: 50px;
    width: 300px;
    font-family: f;
    position: relative;
    overflow: hidden;
    text-decoration: none;
    text-transform: none;
    letter-spacing: 2px;
    color: white;
    font-size: 14px;
    text-align: center;
    -webkit-border-radius: 34px;
    border-radius: 34px;
}
.btn span {
    position: relative;
    top: 14px;
    font-size: 18px;
    letter-spacing: 0px;
}
.btn:after {
    position: absolute;
    content: '';
    display: inline-block;
    background: #7243a9;
    background: -webkit-linear-gradient(0deg, #fb3152 0%, #fb576f 100%);
    background: linear-gradient(0deg, #fb3152 0%, #fb576f 100%);
    height: 50px;
    width: 406px;
    z-index: -1;
    -webkit-transform: translateX(-280px);
    transform: translateX(-280px);
    -webkit-transition: -webkit-transform 400ms ease-in;
    transition: -webkit-transform 400ms ease-in;
    transition: transform 400ms ease-in;
    transition: transform 400ms ease-in, -webkit-transform 400ms ease-in;
}

.btn-nobg span {
    position: relative;
    top: 14px;
    font-size: 18px;
    letter-spacing: 0px;
}
.btn-check {
    display: inline-block;
    height: 50px;
    width: 254px;
    font-family: proxima;
    position: fixed;
    overflow: hidden;
    text-decoration: none;
    text-transform: none;
    letter-spacing: 2px;
    color: white;
    font-size: 14px;
    text-align: center;
    -webkit-border-radius: 34px;
    bottom: 20px;
    margin: 0 auto;
    left: 0;
    right: 0;
    font-size: 18px;
    font-family: 'f';
    bottom: 20px;
    z-index: 9;
}
.btn-check span {
    position: relative;
    top: 14px;
    font-size: 18px;
    letter-spacing: 0px;
}
.btn-check:after {
    position: absolute;
    content: '';
    display: inline-block;
    background: #7243a9;
    background: -webkit-linear-gradient(45deg, #ffc107 0%, #ffc107 25%, #ff9800 81%, #ff9800 100%);
    background: linear-gradient(45deg, #ffc107 0%, #ff9800 25%, #ff9800 81%, #ff9800 100%);
    height: 51px;
    width: 402px;
    z-index: -1;
    -webkit-transform: translateX(-280px);
    transform: translateX(-280px);
    -webkit-transition: -webkit-transform 400ms ease-in;
    transition: -webkit-transform 400ms ease-in;
    transition: transform 400ms ease-in;
    transition: transform 400ms ease-in, -webkit-transform 400ms ease-in;
}
.badfit:after {
  background: linear-gradient(45deg, #a94343 0%, #F44336 25%, #f88484 81%, #f88484 100%);
}
.btn.badfit span {
  font-size: 16px;
}
.btn.badfit {
  width: 314px;
}
.fader {
    -moz-transition: opacity 0.7s linear;
    -o-transition: opacity 0.7s linear;
    -webkit-transition: opacity 0.7s linear;
    transition: opacity 0.7s linear;
}

.fadedOut {
    opacity: 0;
}

.top-menu {
  position: absolute;
  top: 22px;
  margin-left: 56px;
}

.step-indicator {
  margin-bottom: 20px;
  line-height: 30px;
}

.step {
  display: block;
  float: left;
  padding-left: 2px;
  font-weight: bold;
  background: #f9f9f9;
  padding-right: 10px;
  height: 32px;
  line-height: 32px;
  margin-right: 33px;
  position: relative;
  text-decoration: none;
  color: #666;
  cursor: default;
}
.step:before {
  content: "";
  display: block;
  width: 0;
  height: 0;
  position: absolute;
  top: 0;
  left: -30px;
  border: 16px solid transparent;
  border-color: #f9f9f9;
  border-left-color: transparent;
}
.step:after {
  content: "";
  display: block;
  width: 0;
  height: 0;
  position: absolute;
  top: 0;
  right: -32px;
  border: 16px solid transparent;
  border-left-color: #f9f9f9;
}
.step:first-of-type {
  border-radius: 10px 0 0 10px;;
  padding-left: 18px;
}
.step:first-of-type:before {
  display: none;
}
.step:last-of-type {
  border-radius: 0px 10px 10px 0px;
  margin-right: 25px;
  padding-right: 15px;
}
.step:last-of-type:after {
  display: none;
}
.step.completed {
  background: #fdb446;
  color: #fff;
  cursor: pointer;
}
.step.completed:before {
  border-color: #fdb446;
  border-left-color: transparent;
}
.step.completed:after {
  border-left-color: #fdb446;
}
#size-trial {
  position: relative;
  top: -100px;
  margin: 0px auto;
  z-index: 1;
  opacity: 0.9;
  border: 1px solid rgba(255, 255, 255, 0.48);
  background: rgba(27, 27, 27, 0.3);
}
.outline {
    width: 90%;
    top: 154px;
    position: absolute;
    margin: 0 auto;
    left: 5.5%;
    display: none;
}
.app{
    width: 100%;
    margin-top: 22px;
    position: relative;
}

.app #start-camera{
    display: none;
    border-radius: 3px;
    max-width: 400px;
    color: #fff;
    background-color: #448AFF;
    text-decoration: none;
    padding: 15px;
    opacity: 0.8;
    margin: 50px auto;
    text-align: center;
}

.app video#camera-stream{
    display: none;
    width: 100%;
    position: absolute;
    top: -190px;
}

.app img#snap{
    position: absolute;
    top: -190px;
    left: 0;
    width: 100%;
    z-index: 10;
    display: none;
}

.app #error-message{
    width: 100%;
    background-color: #ccc;
    color: #9b9b9b;
    font-size: 28px;
    padding: 200px 100px;
    text-align: center;
    display: none;
}

.app .controls{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 20;

    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    padding: 30px;
    display: none;
}

.app .controls a{
    color: #fff;
    background-color: #fff;
    text-decoration: none;
    padding: 34px;
    line-height: 0;
    opacity: 1;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

.app a#take-photo {
    position: absolute;
    margin: 0px auto;
    width: 50%;
    text-align: center;
    height: 55%;
    top: 0%;
    border-radius: 0px;
    left: 25.4%;
}

.app a#delete-photo {
    position: absolute;
    bottom: 0px;
    width: 100%;
    left: 0%;
    text-align: center;
}

.app a#download-photo {
    visibility: hidden;
}

.app .controls a.disabled{
    background-color: transparent;
    opacity: 1;
    cursor: default;
    pointer-events: none;
    background: rgba(95, 95, 95, 0.69);
    background-image: linear-gradient(to right, black 33%, rgba(255,255,255,0) 0%);
    background-position: bottom;
    background-size: 2px 1px;
    background-repeat: repeat;
}

.app .controls a i{
    font-size: 18px;
}

.app .controls #take-photo i{
    font-size: 32px;
}

.app canvas{
    display: none;
}

.app video#camera-stream.visible,
.app img#snap.visible,
.app #error-message.visible
{
    display: block;
}

.app .controls.visible{
    display: flex;
}


.scanning:after {
    content: '';
    display: block;
    width: 100em;
    height: 100em;
    transform: rotate(90deg);
    position: absolute;
    top: -77px;
    left: 0;
    z-index: 9999;
    background: linear-gradient(270deg, rgba(0,0,0,.7) 50%, rgba(0,255,0,.5) 55%, rgba(0,255,0,.7) 56%, rgba(0,0,0,.7) 56% );
    background-size: 300% 100%;
    background-repeat: no-repeat;
    background-position: 84% center;
    -webkit-animation: scan 1.7s infinite ease;
}

@-webkit-keyframes scan {
  /* finish with the scan bar just off the right side */
  100% { background-position: 30% center; }
}

/* these are just for the placeholder content */
p, button { font-size: 16px;}
p img.left { float: left; margin-right: 1em; }
p img.right { float: right; margin-left: 1em; }


.circ{
    opacity: 0;
    stroke-dasharray: 130;
    stroke-dashoffset: 130;
    -webkit-transition: all 1s;
    -moz-transition: all 1s;
    -ms-transition: all 1s;
    -o-transition: all 1s;
    transition: all 1s;
}
.tick{
  fill-color:green;
    stroke-dasharray: 50;
    stroke-dashoffset: 50;
    -webkit-transition: stroke-dashoffset 1s 0.5s ease-out;
    -moz-transition: stroke-dashoffset 1s 0.5s ease-out;
    -ms-transition: stroke-dashoffset 1s 0.5s ease-out;
    -o-transition: stroke-dashoffset 1s 0.5s ease-out;
    transition: stroke-dashoffset 1s 0.5s ease-out;
}
.drawn + svg .path{
    opacity: 1;
    stroke-dashoffset: 0;
}
@media (max-width: 599px){
    .container{
    }
    .glitter {
      background-image: url(img/bg.png);
      height: 100%;
      background-size: cover;
      background-position-y: -15px;
    }
    .logo {
      width: 100%;
      height: 58px;
      margin: 0 auto;
      top: 15px;
      position: absolute;
      left: 0px;
      z-index: 1;
      -webkit-box-shadow: 0px 13px 25px -12px rgba(0,0,0,0.18);
      -moz-box-shadow: 0px 13px 25px -12px rgba(0,0,0,0.18);
      box-shadow: 0px 13px 25px -12px rgba(0,0,0,0.18);
    }
    .headline {
      margin: 0 auto;
      margin-top: 92px;
      width: 340px;
      font-size: 30px;
      letter-spacing: 0px;
      text-align: center;
    }
    .description {
      margin: 0 auto;
      width: 80%;
      margin-top: 30px;
      font-size: 20px;
      text-align: center;
      line-height: 26px;
      padding-bottom: 32px;
    }
    .gylph img {
      width: 110px;
    }
    .gylph {
        width: 123px;
        margin: 0 auto;
        left: 6px;
        position: relative;
    }
    .button-container {
      margin: 0 auto;
      left: 0;
      right: 0;
      bottom: 0;
      height: 100px;
      position: fixed;
      width: 297px;
    }
    .tabs-menu {
      height: 30px;
      float: left;
      clear: both;
      list-style: none;
      margin-left: 44px;
      width: 100%;
  }
}
@media (min-width: 600px){
    .container{
    }
    .products {
      left: 0 !important;
    }
    .product-bg-size {
      left: -66px;
    }
    .merchant-size-container {
      left: 200px;
    }
    #tabs {
      left: 0px;
      width: 100%;
    }
    #tabs-container {
      margin-left: 140px;
    }
    .btn {
      width: 275px;
    }
    .top-menu {
      position: absolute;
      top: 24px;
      margin-left: 190px;
    }
    .content {
      margin-top: 54px;
      font-size: 20px;
    }
    .outline {
    width: 80%;
    margin-top: 44px;
    }
    .glitter {
      background-image: url(img/bg.png);
      height: 100%;
      background-size: cover;
      background-position-y: -31px;
    }
    .logo {
      width: 178px;
      height: 44px;
      margin: 0 auto;
      top: 20px;
      z-index: 1;
      position: absolute;
      left: 20px;
    }
    .headline {
      margin-left: 65px;
      padding-top: 150px;
      font-size: 30px;
      letter-spacing: 0px;
    }
    .description {
      margin-left: 65px;
      width: 80%;
      font-size: 20px;
      padding-bottom: 50px;
      margin-top: 12px;
      line-height: 26px;
    }
    .gylph img {
      width: 184px;
      margin-left: 26px;
    }
    .gylph {
        width: 200px;
        margin: 0 auto;
    }
    .button-container {
      padding-top: 36px;
      margin: 0 auto;
      position: relative;
      width: 240px;
    }
    .tabs-menu {
      height: 30px;
      float: left;
      clear: both;
      list-style: none;
      margin-left: 44px;
      width: 100%;
  }
}
@media (min-width: 1200px) {
  .product-bg {
      background-image: url(img/pbg.png);
      width: 100vw;height: 460px;
      background-size: cover;
      position: relative;
      opacity: 1;
      left: -7vw;
    }
}
@media (min-width: 1400px) {
  .product-bg {
      background-image: url(img/pbg.png);
      width: 100vw;height: 460px;
      background-size: cover;
      position: relative;
      opacity: 1;
      left: -19vw;
    }
}
@media (min-width: 1022px){
.product-bg-size {
  left: -98px;
}
}
@media (min-width: 1025px){
    .container{
    }
    .merchant-size-container {
      left: 300px;
    }
    body {
      overflow-y: hidden;
    }
    .product-bg-size {
      left: -118px;
    }
    .size-hanger, .size-title {
      left: 88px;
    }
    .btn {
      width: 275px;
    }
    .top-menu {
      position: absolute;
      top: 24px;
      margin-left: 280px;
    }
    .content {
      margin-top: 54px;
      font-size: 22px;
    }
    .outline {
    width: 80%;
    margin-top: 14px;
    }
    .glitter {
      background-image: url(img/bg.png);
      height: 100%;
      background-size: cover;
      background-position-y: -31px;
    }
    .logo {
      width: 178px;
      height: 44px;
      margin: 0 auto;
      background-size: contain;
      top: 20px;
      z-index: 1;
      position: absolute;
      left: 20px;
    }
    .headline {
      margin-left: 85px;
      padding-top: 150px;
      font-size: 36px;
      letter-spacing: 0px;
    }
    .description {
      margin-left: 85px;
      width: 80%;
      font-size: 24px;
      padding-bottom: 50px;
      margin-top: 12px;
      line-height: 26px;
    }
    .gylph img {
      width: 184px;
      margin-left: 26px;
    }
    .gylph {
        width: 200px;
        margin: 0 auto;
    }
    .button-container {
      padding-top: 36px;
      margin: 0 auto;
      position: relative;
      width: 240px;
    }
    .tabs-menu {
      height: 30px;
      float: left;
      clear: both;
      list-style: none;
      margin-left: 344px;
      width: 100%;
  }
}

</style>
<link rel="stylesheet" type="text/css" href="css/slick.css">
<link rel="stylesheet" type="text/css" href="css/slick-theme.css">
<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
<script src="scripts/slick.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
<div class="container fader" id="containerWiz">

</div>
<div class="app" >
                    <a href="#" id="start-camera" class="visible">Touch here to start the app.</a>
                    <video id="camera-stream" style="visibility: hidden;display: none;"></video>
                    <img id="snap" />
                    <p id="error-message"></p>
                    <div class="controls">
                      <a href="#" id="delete-photo" title="Delete Photo" class="disabled"><span>WAIST</span></a>
                      <a href="#" id="take-photo" title="Take Photo" class="disabled"><span>FACE</span></a>
                      <a href="#" id="download-photo" download="selfie.png" title="Save Photo" class="disabled"><i class="material-icons">file_download</i></a>  
                    </div>
                    <canvas id="canvas" width="640" height="480"></canvas>
                    <canvas id="sampleCanvas" width="640" height="480" style="display: none"></canvas>
                  </div>
                  <img src="img/outlinew.png" class="outline content"/>
                </div>
               
                <div class="mask" style="position: absolute;top: 0px;"></div>
<!--Bundled file-->
<script src="https://api.loggr.net/1/loggr.min.js?l=poshfind&a=b687eacebeee405cafc202bc350d4f71"></script>
<script language="javascript">
!function(s){var i="-",n="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",n+=""+width+" x "+height);var e,r,o,d=navigator.appVersion,a=navigator.userAgent,t=navigator.appName,w=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10);-1!=(r=a.indexOf("Opera"))&&(t="Opera",w=a.substring(r+6),-1!=(r=a.indexOf("Version"))&&(w=a.substring(r+8))),-1!=(r=a.indexOf("OPR"))?(t="Opera",w=a.substring(r+4)):-1!=(r=a.indexOf("Edge"))?(t="Microsoft Edge",w=a.substring(r+5)):-1!=(r=a.indexOf("MSIE"))?(t="Microsoft Internet Explorer",w=a.substring(r+5)):-1!=(r=a.indexOf("Chrome"))?(t="Chrome",w=a.substring(r+7)):-1!=(r=a.indexOf("Safari"))?(t="Safari",w=a.substring(r+7),-1!=(r=a.indexOf("Version"))&&(w=a.substring(r+8))):-1!=(r=a.indexOf("Firefox"))?(t="Firefox",w=a.substring(r+8)):-1!=a.indexOf("Trident/")?(t="Microsoft Internet Explorer",w=a.substring(a.indexOf("rv:")+3)):(e=a.lastIndexOf(" ")+1)<(r=a.lastIndexOf("/"))&&(t=a.substring(e,r),w=a.substring(r+1),t.toLowerCase()==t.toUpperCase()&&(t=navigator.appName)),-1!=(o=w.indexOf(";"))&&(w=w.substring(0,o)),-1!=(o=w.indexOf(" "))&&(w=w.substring(0,o)),-1!=(o=w.indexOf(")"))&&(w=w.substring(0,o)),c=parseInt(""+w,10),isNaN(c)&&(w=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10));var W=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(d),O=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||O||(document.cookie="testcookie",O=-1!=document.cookie.indexOf("testcookie")?!0:!1);var f=i,g=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var p in g){var b=g[p];if(b.r.test(a)){f=b.s;break}}var x=i;switch(/Windows/.test(f)&&(x=/Windows (.*)/.exec(f)[1],f="Windows"),f){case"Mac OS X":x=/Mac OS X (10[\.\_\d]+)/.exec(a)[1];break;case"Android":x=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":x=/OS (\d+)_(\d+)_?(\d+)?/.exec(d),x=x[1]+"."+x[2]+"."+(0|x[3])}var u="no check";if("undefined"!=typeof swfobject){var h=swfobject.getFlashPlayerVersion();u=h.major>0?h.major+"."+h.minor+" r"+h.release:i}s.jscd={screen:n,browser:t,browserVersion:w,browserMajorVersion:c,mobile:W,os:f,osVersion:x,cookies:O,flashVersion:u}}(this);

function stepEMeasure() {
  $("#step_selfie").removeClass('completed');
  $("#step_emeasure").addClass('completed');
  //location.href='/update';
  Loggr.Log.trackUser(uid, "", "onScanComplete called.");
  window.onScanComplete();
}

var guid = function() {
    if(sessionStorage.getItem('guid') != null) {
      return sessionStorage.getItem('guid');
    }
    var nav = window.navigator;
    var screen = window.screen;
    var guid = nav.mimeTypes.length;
    guid += nav.userAgent.replace(/\D+/g, '');
    guid += nav.plugins.length;
    guid += screen.height || '';
    guid += screen.width || '';
    guid += screen.pixelDepth || '';
    sessionStorage.setItem('guid', guid);
    return guid;
};
uid = guid();

var nonLatestChrome = true;
var chromeOnly = false;
if(jscd.browser == 'Chrome' && navigator.userAgent.indexOf('Samsung') == -1
  && jscd.browserMajorVersion >= 54) {
  nonLatestChrome = true;
  chromeOnly = true;
}

var variation = nonLatestChrome ? 1 : 0;

if(variation == 1) {
Loggr.Log.trackUser(uid, "", "non-latest-chrome. Loading variation 1");
} else {
Loggr.Log.trackUser(uid, "", "latest-chrome. Loading variation 0");  
}
function loadVariation() {
  // variation = Math.round(Math.random());
  gtag('event', 'Stage', {'event_category':'variation', 'event_label':'variation'+variation});
  if(variation == 0){
    $('.mask').css('top','195px');
    // $('.outline').show();
    $('.button-container').show();
  }
}

loadVariation();

function sendPic(){
    var obj = {
        "key": localStorage.getItem('pic')
    };
    var data = JSON.stringify(obj);
    $.ajax({
        url: "https://api.myjson.com/bins",
        type: "POST",
        data: data,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data, textStatus, jqXHR) {
           Loggr.Log.trackUser(uid, "", "user selfie captured: "+data.uri);
           var xmlhttp = new XMLHttpRequest();
           var imgUrl = data.uri;
           imgUrl = imgUrl.replace(/https\:\/\//,'');
           imgUrl = imgUrl.replace(/\//g,'slash');
           xmlhttp.open("GET", "http://198.91.88.86/home/rest/signup/adduser/"+imgUrl, true);
           xmlhttp.send(null);
           xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200){}
           }
        }
    });
}

</script>

<script src="scripts/gumwrapper.min.js"></script>
<script src="wiz.bundle.min.js"></script>
<script src="scripts/selfie.js"></script>
<script type="text/javascript" src="haar/lib/jsfeat-samples/js/jsfeat-min.js"></script>
<script type="text/javascript" src="haar/lib/jsfeat/cascades/upperbody.js"></script>
<script type="text/javascript" src="haar/lib/jsfeat-samples/js/compatibility.js"></script>
<script type="text/javascript" src="haar/lib/jsfeat-samples/js/frontalface.js"></script>

<script src="scripts/load-image.js"></script>
<script src="scripts/load-image-scale.js"></script>
<script src="scripts/load-image-meta.js"></script>
<script src="scripts/load-image-fetch.js"></script>
<script src="scripts/load-image-exif.js"></script>
<script src="scripts/load-image-exif-map.js"></script>
<script src="scripts/load-image-orientation.js"></script>

<!-- jQuery and Jcrop are not required by JavaScript Load Image, but included for the demo -->
<!--<script src="scripts/jquery.js"></script>
<script src="scripts/jquery.Jcrop.js"></script>-->
<script src="scripts/demo.js"></script>

<script type="text/javascript" >
      (function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o),a=0;r>a;a++)i[a]=n.charCodeAt(a);return o}function r(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){200!=this.status&&0!==this.status||t(this.response)},n.send()}function o(e,n){function o(t){var r=i(t),o=a(t);e.exifdata=r||{},e.iptcdata=o||{},n&&n.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var s=t(e.src);o(s)}else if(/^blob\:/i.test(e.src)){var l=new FileReader;l.onload=function(e){o(e.target.result)},r(e.src,function(e){l.readAsArrayBuffer(e)})}else{var u=new XMLHttpRequest;u.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";o(u.response),u=null},u.open("GET",e.src,!0),u.responseType="arraybuffer",u.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var l=new FileReader;l.onload=function(e){f&&console.log("Got file of length "+e.target.result.byteLength),o(e.target.result)},l.readAsArrayBuffer(e)}}function i(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n,r=2,o=e.byteLength;o>r;){if(255!=t.getUint8(r))return f&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),f&&console.log(n),225==n)return f&&console.log("Found 0xFFE1 marker"),c(t,r+4,t.getUint16(r+2)-2);r+=2+t.getUint16(r+2)}}function a(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n=2,r=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};r>n;){if(o(t,n)){var i=t.getUint8(n+7);i%2!==0&&(i+=1),0===i&&(i=4);var a=n+8+i,l=t.getUint16(n+6+i);return s(e,a,l)}n++}}function s(e,t,n){for(var r,o,i,a,s,l=new DataView(e),u={},c=t;t+n>c;)28===l.getUint8(c)&&2===l.getUint8(c+1)&&(a=l.getUint8(c+2),a in F&&(i=l.getInt16(c+3),s=i+5,o=F[a],r=d(l,c+5,i),u.hasOwnProperty(o)?u[o]instanceof Array?u[o].push(r):u[o]=[u[o],r]:u[o]=r)),c++;return u}function l(e,t,n,r,o){var i,a,s,l=e.getUint16(n,!o),d={};for(s=0;l>s;s++)i=n+12*s+2,a=r[e.getUint16(i,!o)],!a&&f&&console.log("Unknown tag: "+e.getUint16(i,!o)),d[a]=u(e,i,t,n,o);return d}function u(e,t,n,r,o){var i,a,s,l,u,c,f=e.getUint16(t+2,!o),g=e.getUint32(t+4,!o),h=e.getUint32(t+8,!o)+n;switch(f){case 1:case 7:if(1==g)return e.getUint8(t+8,!o);for(i=g>4?h:t+8,a=[],l=0;g>l;l++)a[l]=e.getUint8(i+l);return a;case 2:return i=g>4?h:t+8,d(e,i,g-1);case 3:if(1==g)return e.getUint16(t+8,!o);for(i=g>2?h:t+8,a=[],l=0;g>l;l++)a[l]=e.getUint16(i+2*l,!o);return a;case 4:if(1==g)return e.getUint32(t+8,!o);for(a=[],l=0;g>l;l++)a[l]=e.getUint32(h+4*l,!o);return a;case 5:if(1==g)return u=e.getUint32(h,!o),c=e.getUint32(h+4,!o),s=new Number(u/c),s.numerator=u,s.denominator=c,s;for(a=[],l=0;g>l;l++)u=e.getUint32(h+8*l,!o),c=e.getUint32(h+4+8*l,!o),a[l]=new Number(u/c),a[l].numerator=u,a[l].denominator=c;return a;case 9:if(1==g)return e.getInt32(t+8,!o);for(a=[],l=0;g>l;l++)a[l]=e.getInt32(h+4*l,!o);return a;case 10:if(1==g)return e.getInt32(h,!o)/e.getInt32(h+4,!o);for(a=[],l=0;g>l;l++)a[l]=e.getInt32(h+8*l,!o)/e.getInt32(h+4+8*l,!o);return a}}function d(e,t,r){var o="";for(n=t;n<t+r;n++)o+=String.fromCharCode(e.getUint8(n));return o}function c(e,t){if("Exif"!=d(e,t,4))return f&&console.log("Not valid EXIF data! "+d(e,t,4)),!1;var n,r,o,i,a,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return f&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return f&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(s+4,!n);if(8>u)return f&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if(r=l(e,s,s+u,p,n),r.ExifIFDPointer){i=l(e,s,s+r.ExifIFDPointer,m,n);for(o in i){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":i[o]=P[o][i[o]];break;case"ExifVersion":case"FlashpixVersion":i[o]=String.fromCharCode(i[o][0],i[o][1],i[o][2],i[o][3]);break;case"ComponentsConfiguration":i[o]=P.Components[i[o][0]]+P.Components[i[o][1]]+P.Components[i[o][2]]+P.Components[i[o][3]]}r[o]=i[o]}}if(r.GPSInfoIFDPointer){a=l(e,s,s+r.GPSInfoIFDPointer,S,n);for(o in a){switch(o){case"GPSVersionID":a[o]=a[o][0]+"."+a[o][1]+"."+a[o][2]+"."+a[o][3]}r[o]=a[o]}}return r}var f=!1,g=this,h=function(e){return e instanceof h?e:this instanceof h?void(this.EXIFwrapped=e):new h(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.EXIF=h):g.EXIF=h;var m=h.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},p=h.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},S=h.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},P=h.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},F={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};h.getData=function(t,n){return(t instanceof Image||t instanceof HTMLImageElement)&&!t.complete?!1:(e(t)?n&&n.call(t):o(t,n),!0)},h.getTag=function(t,n){return e(t)?t.exifdata[n]:void 0},h.getAllTags=function(t){if(!e(t))return{};var n,r=t.exifdata,o={};for(n in r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o},h.pretty=function(t){if(!e(t))return"";var n,r=t.exifdata,o="";for(n in r)r.hasOwnProperty(n)&&(o+="object"==typeof r[n]?r[n]instanceof Number?n+" : "+r[n]+" ["+r[n].numerator+"/"+r[n].denominator+"]\r\n":n+" : ["+r[n].length+" values]\r\n":n+" : "+r[n]+"\r\n");return o},h.readFromBinaryFile=function(e){return i(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return h})}).call(this);
    </script>
<script type="text/javascript">

window.addEventListener('beforeinstallprompt', function(e) {
  // For more details read: https://developers.google.com/web/fundamentals/getting-started/primers/promises
  e.userChoice.then(function(choiceResult) {
    if(choiceResult.outcome == 'dismissed') {
      Loggr.Log.trackUser(uid, "", "cancelled home screen install");
      gtag('event', 'Homescreen', {'event_category':'action', 'event_label':'dismissed'});
    }
    else {
      Loggr.Log.trackUser(uid, "", "added to home screen");
      gtag('event', 'Homescreen', {'event_category':'action', 'event_label':'added'});
    }
  });
});

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js').then(function() {
    return navigator.serviceWorker.ready;
  }).then(function(reg) {
    console.log('Service Worker is ready to go!', reg);
    reg.pushManager.subscribe(
      {
        userVisibleOnly: true
      }
    ).then(function(sub) {
      console.log(JSON.stringify(sub));
    });
  }).catch(function(error) {
    console.log('Service Worker failed to boot', error);
  });
}
  
var selectedCat = 'tops';
var gui,options,ctx,canvasWidth,canvasHeight;
var img_u8,work_canvas,work_ctx,ii_sum,ii_sqsum,ii_tilted,edg,ii_canny;
var faceClassifier = jsfeat.haar['frontalface'];
var upperBodyClassifier = jsfeat.haar['upperbody'];
var image, faceX, faceY, faceW, faceH, shoulderX, shoulderY, shoulderW, shoulderH, retryCount=0, scr, streamTrack, minHeightVal;
minHeightVal = screen.height-80;

var voteS=0, voteM=0, voteXL=0, voteXXL=0;
var sarrShoulderW = [306,250,234];
var sarrShoulderX = [158,204,58];
var sarrFaceW = [166,162,174];
var sarrFaceX = [131,154,156];

var marrShoulderW = [234,234,234];
var marrShoulderX = [154,154,242];
var marrFaceW = [188,187,171];
var marrFaceX = [148,151,145];

var xlarrShoulderW = [234,234,234,234];
var xlarrShoulderX = [154,122,21,130];
var xlarrFaceW = [186,196,195,188];
var xlarrFaceX = [138,143,143,150];

var xxlarrShoulderW = [234,178,234,178];
var xxlarrShoulderX = [194,66,34,242];
var xxlarrFaceW = [169,181,258,188];
var xxlarrFaceX = [145,123,105,159];

function closest(arr, closestTo){

    var closest = Math.max.apply(null, arr); //Get the highest number in arr in case it match nothing.
    for(var i = 0; i < arr.length; i++){ //Loop the array
        if(arr[i] >= closestTo && arr[i] < closest) closest = arr[i]; //Check if it's higher than your number, but lower than your closest value
    }
    return closest; // return the value
}

function clearLocalStorage() {
  localStorage.removeItem('faceX');localStorage.removeItem('faceY');localStorage.removeItem('faceW');localStorage.removeItem('faceH');
  localStorage.removeItem('shoulderX');localStorage.removeItem('shoulderY');localStorage.removeItem('shoulderW');localStorage.removeItem('shoulderH');localStorage.removeItem('pic');localStorage.removeItem('userSize'); localStorage.removeItem('quizFlow');
}

clearLocalStorage();

var onresize = function() {
  minHeightVal = screen.height-80;
}
window.addEventListener("resize", onresize);
var myInput = document.getElementById('file-1');
// myInput.addEventListener('change', window.handleImageSelection, false);
function handleImageSelection() {
    //show loader
     
     var myInput = document.getElementById('file-1');
     var files = myInput.files;
     setTimeout(function(){
     for(var i = 0; i< files.length; i++)
     {
         var file = files[i];
         //Only pics
         if(!file.type.match('image'))
           continue;
         var picReader = new FileReader();
         picReader.addEventListener("load",function(event){
             var picFile = event.target;
             
             var div = document.getElementById("selfieImage");
             
             var img = new Image();
             img.id='selfieimg';
             img.src = picFile.result;
             localStorage.setItem('selfie', img.src);
             img.setAttribute('style','background: transparent;');
             img.onload = function() {
                /*EXIF.getData(img, function() {
                   var orientation = EXIF.getTag(this, "Orientation");
                   localStorage.setItem('orientation',orientation);
                   switch(orientation) {
                     case 3:
                       $(img).css('transform', 'rotate(180deg)');
                       sessionStorage.setItem('img-transform','rotate(180deg)');
                       break;
                     case 6:
                       $(img).css('transform', 'rotate(90deg)');
                       sessionStorage.setItem('img-transform','rotate(90deg)');
                       break;
                     case 8:
                       //$(img).css('transform', 'rotate(-90deg)');
                       sessionStorage.setItem('img-transform','rotate(-90deg)');
                       $(img).addClass('minus90');
                       break;
                   }
                   $('#selfieMsg').hide();
                   // if(screen.width < 1000) {$('.mask').addClass('scanning');} else {$('body').css('opacity','0.4');}
                   $('#captureButton').hide();
                   $('.selfie').hide();
               });*/
               $($('.selfie')[$('.selfie').length-1]).parent().css('max-width','90%');
               $($('.selfie')[$('.selfie').length-1]).parent().css('margin-bottom','24px');
               // setTimeout(function(){ $('.mask').hide();$('.loading').hide();window.onScanComplete();},1200);
             };
             div.innerHTML = '';
             selfieGlobalImg = img;
             div.appendChild(img);  
             image = img;

             computeNearestSize(img.src);

             
         });
          //Read the image
         picReader.readAsDataURL(file);
     }
     },400);
}

function computeNearestSize(imgsrc) {
// Show image. 
  $('#selfieimg').attr('src',imgsrc);
  image.setAttribute('src', imgsrc);
  image.classList.add("visible");

 // Set the href attribute of the download button to the snap url.
  // download_photo_btn.href = imgsrc;
  $('#selfieMsg').html('Scanning...');
  if(screen.width < 1000) {$('.mask').addClass('scanning');} else {$('body').css('opacity','0.4');}
  document.querySelector('#selfieimg').onload = function() {
    setTimeout("demo_app();",100);
    setTimeout("tick(faceClassifier, 'face');",100);
    setTimeout("tick(upperBodyClassifier, 'upperbody');",100);
  }
    setTimeout(function () {
      if(screen.width < 1000) {
        $('.mask').removeClass('scanning');
      } else {
        $('body').css('opacity','1');
      }
      var fswRatio = faceW/(shoulderW*2);
      // alert('F/S:'+fswRatio);
      //$('.app').css('opacity','0');
      $('#take-photo').html('');
      $('.capture').css('visibility','hidden');
      $('#confirmation').show();
      $(".trigger").toggleClass("drawn");

        if(variation == 1) {
          localStorage.setItem('pic',$('#selfie-url').attr('href'));
         } else {
          localStorage.setItem('pic',canvas.toDataURL());
         }
        localStorage.setItem('faceX',faceX);
        localStorage.setItem('faceY',faceY);
        localStorage.setItem('faceW',faceW);
        localStorage.setItem('faceH',faceH);
        // alert("faceX: "+faceX+", faceY: "+faceY+", faceW: "+faceW+", faceH: "+faceH+", shoulderX: "+localStorage.getItem('shoulderX')+", shoulderY: "+localStorage.getItem('shoulderY')+", shoulderW: "+localStorage.getItem('shoulderW')+", shoulderH: "+localStorage.getItem('shoulderH'));
        

        //find closest in shoulderW
          var closestValS = closest(sarrShoulderW, shoulderW);
          var closestValM = closest(marrShoulderW, shoulderW);
          var closestValXL = closest(xlarrShoulderW, shoulderW);
          var closestValXXL = closest(xxlarrShoulderW, shoulderW);
          var newArr = new Array();
          newArr.push(closestValS);newArr.push(closestValM);newArr.push(closestValXL);newArr.push(closestValXXL);
          var closestValueAmongSizes = closest(newArr, shoulderW);
          
          if(closestValueAmongSizes == closestValS)
            voteS++;
          if(closestValueAmongSizes == closestValM)
            voteM++;
          if(closestValueAmongSizes == closestValXL)
            voteXL++;
          if(closestValueAmongSizes == closestValXXL)
            voteXXL++;

          //find closest in shoulderX
          var closestValS = closest(sarrShoulderX, shoulderX);
          var closestValM = closest(marrShoulderX, shoulderX);
          var closestValXL = closest(xlarrShoulderX, shoulderX);
          var closestValXXL = closest(xxlarrShoulderX, shoulderX);
          newArr = new Array();
          newArr.push(closestValS);newArr.push(closestValM);newArr.push(closestValXL);newArr.push(closestValXXL);
          closestValueAmongSizes = closest(newArr, shoulderX);
          
          if(closestValueAmongSizes == closestValS)
            voteS++;
          if(closestValueAmongSizes == closestValM)
            voteM++;
          if(closestValueAmongSizes == closestValXL)
            voteXL++;
          if(closestValueAmongSizes == closestValXXL)
            voteXXL++;

          //find closest in faceW
          var closestValS = closest(sarrFaceW, faceW);
          var closestValM = closest(marrFaceW, faceW);
          var closestValXL = closest(xlarrFaceW, faceW);
          var closestValXXL = closest(xxlarrFaceW, faceW);
          newArr = new Array();
          newArr.push(closestValS);newArr.push(closestValM);newArr.push(closestValXL);newArr.push(closestValXXL);
          closestValueAmongSizes = closest(newArr, faceW);
          
          if(closestValueAmongSizes == closestValS)
            voteS++;
          if(closestValueAmongSizes == closestValM)
            voteM++;
          if(closestValueAmongSizes == closestValXL)
            voteXL++;
          if(closestValueAmongSizes == closestValXXL)
            voteXXL++;

          //find closest in faceX
          var closestValS = closest(sarrFaceX, faceX);
          var closestValM = closest(marrFaceX, faceX);
          var closestValXL = closest(xlarrFaceX, faceX);
          var closestValXXL = closest(xxlarrFaceX, faceX);
          newArr = new Array();
          newArr.push(closestValS);newArr.push(closestValM);newArr.push(closestValXL);newArr.push(closestValXXL);
          closestValueAmongSizes = closest(newArr, faceX);
          
          if(closestValueAmongSizes == closestValS)
            voteS++;
          if(closestValueAmongSizes == closestValM)
            voteM++;
          if(closestValueAmongSizes == closestValXL)
            voteXL++;
          if(closestValueAmongSizes == closestValXXL)
            voteXXL++;

          var largestVotes = Math.max(voteS,voteM,voteXL,voteXXL);
          if(largestVotes == voteXXL) {
            size = 'xxl';
          } else if(largestVotes == voteXL) {
            size = 'xl';
          } else if(largestVotes == voteM) {
            size = 'l';
          } else if(largestVotes == voteS) {
            size = 'm';
          } else {
            size = 'xl';
          }

          //alert('largest votes for '+size+' total: '+largestVotes);
          
          if((voteM == 1 || voteM ==2) && voteS <=1 && voteXL <= 1)
            size = 'l';
          else if(voteS >= 2 && (voteM == 0 || voteM == 1 || voteM == 2))
            size = 'm';
          else if(voteS <= 1 && voteM <= 1 && voteXXL >= 3)
            size = 'xxl';
          else 
            size = 'xl';
          // alert('votes for m:'+voteS+', l:'+voteM+', xl:'+voteXL+', xxl:'+voteXXL+' Computed: '+size);
          localStorage.setItem('userSize', size);
          Loggr.Log.trackUser(uid, "", "user size captured: "+size);
        stepEMeasure();
    //temp: 100, actual: 4000
    }, 2200);

}

function showSizeVal(slideNum) {
  
  var sizeSrc = $($($('.slick-active').children()[0]).children()[2]).attr('src');
  console.log(sizeSrc);
  if(sizeSrc.indexOf('s.jpg') > 0) { $('.size-title').html('Trying size M');computeFitCircles('M'); Loggr.Log.trackUser(uid, "", "Trying Size: M"); }
  if(sizeSrc.indexOf('m.jpg') > 0) { $('.size-title').html('Trying size L');computeFitCircles('L'); Loggr.Log.trackUser(uid, "", "Trying Size: L"); }
  if(sizeSrc.indexOf('xl.jpg') > 0) { $('.size-title').html('Trying size XL');computeFitCircles('XL'); Loggr.Log.trackUser(uid, "", "Trying Size: XL");}
  if(sizeSrc.indexOf('xxl.jpg') > 0) { $('.size-title').html('Trying size XXL');computeFitCircles('XXL'); Loggr.Log.trackUser(uid, "", "Trying Size: XXL");}
}

function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
}

function removeFitBadClass() {
  $('.fit-shoulder-left').removeClass('bad');$('.fit-shoulder-right').removeClass('bad');
  $('.fit-waist-left').removeClass('bad');$('.fit-waist-right').removeClass('bad');
}

function badSize(msg,hangerSize) {
  if(msg == 's1,w1') {
    removeFitBadClass(); 
    $('.fit-shoulder-left').addClass('bad'); 
    $('.fit-waist-right').addClass('bad');
    $('.fit-shoulder-right').addClass('bad'); 
    $('.fit-waist-left').addClass('bad');
    $('#buy-now').addClass('badfit').addClass('bubbledLeft').removeClass('btn');
    $('#buy-now').html('Too tight around shoulders and waist.');
    $('.size-hanger').attr('src','img/hanger.png');
    $('.size-hanger').css('width','84px');
    $('#size-title').html('Trying Size '+hangerSize);
  } else if(msg == 's1,w2') {
    removeFitBadClass(); 
    $('.fit-shoulder-left').addClass('bad'); 
    $('.fit-waist-right').addClass('bad');
    $('#buy-now').addClass('badfit').addClass('bubbledLeft').removeClass('btn');
    $('#buy-now').html('Tight around shoulders and waist.');
    $('.size-hanger').attr('src','img/hanger.png');
    $('.size-hanger').css('width','84px');
    $('#size-title').html('Trying Size '+hangerSize);
  } else if (msg == 's1,s2') {
    removeFitBadClass(); 
    $('.fit-shoulder-left').addClass('bad'); 
    $('.fit-waist-right').addClass('bad');
    $('.fit-shoulder-right').addClass('bad'); 
    $('.fit-waist-left').addClass('bad');
    $('#buy-now').addClass('badfit').addClass('bubbledLeft').removeClass('btn');
    $('#buy-now').html('Too tight around shoulders.');
    $('.size-hanger').attr('src','img/hanger.png');
    $('.size-hanger').css('width','84px');
    $('#size-title').html('Trying Size '+hangerSize);
  } else if (msg == 'loose-s1,w2') {
    removeFitBadClass(); 
    $('.fit-shoulder-left').addClass('bad'); 
    $('.fit-waist-wight').addClass('bad');
    $('#buy-now').addClass('badfit').addClass('bubbledLeft').removeClass('btn');
    $('#buy-now').html('Slightly loose around shoulders and waist.');
    $('.size-hanger').attr('src','img/hanger.png');
    $('.size-hanger').css('width','84px');
    $('#size-title').html('Trying Size '+hangerSize);
  } else if (msg == 'loose-s1,s2') {
    removeFitBadClass(); 
    $('.fit-shoulder-left').addClass('bad'); 
    $('.fit-shoulder-right').addClass('bad');
    $('#buy-now').addClass('badfit').addClass('bubbledLeft').removeClass('btn');
    $('#buy-now').html('Loose near your shoulders.');
    $('.size-hanger').attr('src','img/hanger.png');
    $('.size-hanger').css('width','84px');
    $('#size-title').html('Trying Size '+hangerSize);
  } else if (msg == 'loose-s1,w1') {
    removeFitBadClass(); 
    $('.fit-shoulder-left').addClass('bad'); 
    $('.fit-shoulder-right').addClass('bad'); 
    $('.fit-waist-left').addClass('bad');
    $('.fit-waist-right').addClass('bad'); 
    $('#buy-now').addClass('badfit').addClass('bubbledLeft').removeClass('btn');
    $('#buy-now').html('Too loose around shoulders and waist.');
    $('.size-hanger').attr('src','img/hanger.png');
    $('.size-hanger').css('width','84px');
    $('#size-title').html('Trying Size '+hangerSize);
    $('.size-title').css('width','162px');
  }
  $('.size-title').removeClass('blink');
  $('.size-title').addClass('blink');
}

function goodSize(msg,hangerSize) {
    removeFitBadClass();
    if(msg == 's') {
      $('.fit-shoulder-left').addClass('bad'); 
    }
    if(msg == 'w') {
      $('.fit-waist-right').addClass('bad'); 
    }
    sessionStorage.setItem('current-product-size', hangerSize);
    $('#buy-now').removeClass('badfit').removeClass('bubbledLeft').addClass('btn'); 
    $('#buy-now').html('<span>Buy at special price</span>');
    $('#buy-now').on('click',function() { 
      gtag('event', 'Stage', {'event_category':'buy', 'event_label':'buy-button-clicked'}); 
      gtag('config', 'UA-107877274-1',{'page_title': 'buy','page_location': 'http://www.poseding.com/buy-button-clicked','page_path': '/buy-button-clicked'});
      
      Loggr.Log.trackUser(uid, "", "Buy button clicked. Navigating to partner site.");
      location.href = sessionStorage.getItem('current-product-url');
    });
    $($('#buy-now').children()[0]).css('top','14px');
    $($('#buy-now').children()[0]).css('font-size','18px');
    $('.size-hanger').attr('src','img/success.png');
    $('.size-hanger').css('width','38px');
    $('.size-title').html('Size '+hangerSize+' fits you!');
    $('.size-title').css('width','196px');
    $('.size-title').removeClass('blink');
}

function computeFitCircles(hangerSize) {
  var userSize = localStorage.getItem('userSize').toUpperCase();
  // debugger;
  var num = getRandomInt(1,5);
  if(userSize == 'M' ) {
    if(hangerSize == 'M') {
      goodSize('','M');
    } else if(hangerSize == 'L') {
      badSize('loose-s1,s2','L');
    } else if(hangerSize == 'XL') {
      badSize('loose-s1,w1','XL');
    } else if(hangerSize == 'XXL') {
      badSize('loose-s1,w1','XXL');
    }
  } else if(userSize == 'L' ) { 
    if(hangerSize == 'M') {
      badSize('s1,w1','M');
    } else if(hangerSize == 'L') {
      goodSize('','L');
    } else if(hangerSize == 'XL') {
      badSize('loose-s1,w2','XL');
    } else if(hangerSize == 'XXL') {
      badSize('loose-s1,w1','XXL');
    }
  } else if(userSize == 'XL' ) { 
    if(hangerSize == 'M') {
      badSize('s1,w1','M');
    } else if(hangerSize == 'L') {
      badSize('s1,w1','L');
    } else if(hangerSize == 'XL') {
      goodSize('','XL');
    } else if(hangerSize == 'XXL') {
      badSize('loose-s1,w2','XXL');
    }
  } else if(userSize == 'XXL' ) {
    if(hangerSize == 'M') {
      badSize('s1,w1','M');
    } else if(hangerSize == 'L') {
      badSize('s1,w1','L');
    } else if(hangerSize == 'XL') {
      badSize('s1,w2','XL');
    } else if(hangerSize == 'XXL') {
      goodSize('','XXL');
    }
  }
}

var max_work_size = 160;
if(screen.width < 500){
  $('body').css('overflow-x','hidden');
  $('body').css('overflow-y','hidden');
}

var demo_opt = function(){
                this.min_scale = 2;
                this.scale_factor = 1.15;
                this.use_canny = false;
                this.edges_density = 0.13;
                this.equalize_histogram = true;
            }

  var canvas = document.getElementById('canvas');
  var video = document.getElementById('camera-stream');
  ctx = canvas.getContext('2d');


function demo_app() {
    canvas = document.getElementById('canvas');
    canvas.width = document.getElementById('load-img-canvas').width;
    canvas.height = document.getElementById('load-img-canvas').height;
    canvasWidth  = document.getElementById('load-img-canvas').width;
    canvasHeight = document.getElementById('load-img-canvas').height;
    ctx = canvas.getContext('2d');

    ctx.fillStyle = "rgb(0,255,0)";
    ctx.strokeStyle = "rgb(0,255,0)";

    var scale = Math.min(max_work_size/canvasWidth, max_work_size/canvasHeight);
    var w = (canvasWidth*scale)|0;
    var h = (canvasHeight*scale)|0;

    img_u8 = new jsfeat.matrix_t(w, h, jsfeat.U8_t | jsfeat.C1_t);
    edg = new jsfeat.matrix_t(w, h, jsfeat.U8_t | jsfeat.C1_t);
    work_canvas = document.createElement('canvas');
    work_canvas.width = w;
    work_canvas.height = h;
    work_ctx = work_canvas.getContext('2d');
    ii_sum = new Int32Array((w+1)*(h+1));
    ii_sqsum = new Int32Array((w+1)*(h+1));
    ii_tilted = new Int32Array((w+1)*(h+1));
    ii_canny = new Int32Array((w+1)*(h+1));

    options = {
                min_scale: 2,
                scale_factor: 1.15,
                use_canny: false,
                edges_density: 0.13,
                equalize_histogram: true
            };

}

function tick(classifier, type) {
  var snap = document.getElementById('selfieimg');
    if(variation==0){
      ctx.drawImage(video, 0, 0, canvasWidth, canvasHeight);
      work_ctx.drawImage(video, 0, 0, work_canvas.width, work_canvas.height);
    }else {
      ctx.drawImage(snap, 0, 0, canvasWidth, canvasHeight);
      work_ctx.drawImage(snap, 0, 0, work_canvas.width, work_canvas.height);
    }
    var imageData = work_ctx.getImageData(0, 0, work_canvas.width, work_canvas.height);

    jsfeat.imgproc.grayscale(imageData.data, img_u8.data);

    // possible options
    if(options.equalize_histogram) {
        jsfeat.imgproc.equalize_histogram(img_u8, img_u8);
    }
    //jsfeat.imgproc.gaussian_blur(img_u8, img_u8, 3);

    jsfeat.imgproc.compute_integral_image(img_u8, ii_sum, ii_sqsum, classifier.tilted ? ii_tilted : null);

    if(options.use_canny) {
        jsfeat.imgproc.canny(img_u8, edg, 100, 50);
        jsfeat.imgproc.compute_integral_image(edg, ii_canny, null, null);
    }

    jsfeat.haar.edges_density = options.edges_density;
    var rects = jsfeat.haar.detect_multi_scale(ii_sum, ii_sqsum, ii_tilted, options.use_canny? ii_canny : null, img_u8.cols, img_u8.rows, classifier, options.scale_factor, options.min_scale);
    rects = jsfeat.haar.group_rectangles(rects, 1);

    // draw only most confident one
    captureSizes(ctx, rects, canvasWidth/img_u8.cols, 1, type);
}

var upperBodyRetryCount = 0;
function captureSizes(ctx, rects, sc, max, type) {
    var on = rects.length;
    console.log('rects: ', rects);
    Loggr.Log.trackUser(uid, "", "rects identified for "+type+": "+rects);
    if(on == 0 && type == "upperbody") {
      upperBodyRetryCount++;
      if(upperBodyRetryCount < 5) {
        demo_app();
        tick(upperBodyClassifier, 'upperbody');
      }
    }
    if(on && max) {
        jsfeat.math.qsort(rects, 0, on-1, function(a,b){return (b.confidence<a.confidence);})
    }
    var n = max || on;
    n = Math.min(n, on);
    var r;
    for(var i = 0; i < n; ++i) {
        r = rects[i];
        if(type == 'face') {
          faceX = r.x*sc;
          faceY = r.y*sc;
          faceW = r.width*sc;
          faceH = r.height*sc;
        } else if(type == 'upperbody') {
          shoulderX = r.x*sc;
          shoulderY = r.y*sc;
          shoulderW = r.width*sc;
          shoulderH = r.height*sc;
          localStorage.setItem('shoulderX', shoulderX);
          localStorage.setItem('shoulderY', shoulderY);
          localStorage.setItem('shoulderW', shoulderW);
          localStorage.setItem('shoulderH', shoulderH);
          var size = localStorage.getItem('shoulderW');
          /*size = size == null ? 250 : size;
          if(size > 80 && size < 151) {
            size = 'm';
          } else if(size > 150 && size < 178) {
            size = 'm';
          } else if(size > 177 && size < 191) {
            size = 'l';
          } else if(size > 190 && size < 230) {
            size = 'xl';
          } else {
            size = 'xxl';
          }*/

          if(shoulderX > faceX*2.2) {
            demo_app();
            tick(upperBodyClassifier, 'upperbody');
            retryCount++;
            if(retryCount >10) {
              break;
            }
          }
        }
        // ctx.strokeRect((r.x*sc)|0,(r.y*sc)|0,(r.width*sc)|0,(r.height*sc)|0);
    }
}

function getCategory() {
  return selectedCat;
}

function getGender() {
  return localStorage.getItem('m') != null && localStorage.getItem('m')=='true' ? 'm' : 'f';
}

function getSize() {
  var s = localStorage.getItem('userSize');
  if(s == null) {
    s = 'xxl';
  } else if(s == 'l') {
    s = 'xl'; //naming change
  }
  return s;
}

</script>


</body>
</html>
